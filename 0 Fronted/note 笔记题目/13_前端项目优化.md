







# vueé¡¹ç›®ä¼˜åŒ–
> [Vue é¡¹ç›®æ€§èƒ½ä¼˜åŒ– â€” å®è·µæŒ‡å—](https://juejin.cn/post/6844903913410314247)
> [ğŸ”¥ 2022 å‰ç«¯æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ - SegmentFault æ€å¦](https://segmentfault.com/a/1190000041753539)
> [èŠä¸€èŠå‰ç«¯æ€§èƒ½ä¼˜åŒ– - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/6911472693405548557)

### æ€§èƒ½ä¼˜åŒ–æœ¬è´¨

**å±•ç¤ºæ›´å¿«**ã€**äº¤äº’å“åº”å¿«**ã€**é¡µé¢æ— å¡é¡¿æƒ…å†µ**ã€‚

æ›´è¯¦ç»†çš„è¯´ï¼Œå°±æ˜¯æŒ‡ï¼Œåœ¨ç”¨æˆ·è¾“å…¥urlåˆ°ç«™ç‚¹å®Œæ•´æŠŠæ•´ä¸ªé¡µé¢å±•ç¤ºå‡ºæ¥çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡å„ç§ä¼˜åŒ–ç­–ç•¥å’Œæ–¹æ³•ï¼Œè®©é¡µé¢åŠ è½½æ›´å¿«ï¼›åœ¨ç”¨æˆ·ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè®©ç”¨æˆ·çš„æ“ä½œå“åº”æ›´åŠæ—¶ï¼Œæœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

### æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡

1.æ€§èƒ½è¯„ä¼° Chrome Performanceé€‰é¡¹å¡ / Lighthouse ç”Ÿæˆæ€§èƒ½æ£€æµ‹æŠ¥å‘Š 

2.å€¼å¾—å…³æ³¨çš„æ€§èƒ½æŒ‡æ ‡

(1)LCP (Largest Contentful Paint æœ€å¤§å†…å®¹ç»˜åˆ¶ ) 

(2)é¦–å±æ¸²æŸ“æ—¶é—´ï¼ˆä¹Ÿå«ç™½å±æ—¶é—´ï¼‰ 

(3)FCP (Fitst Contentful Paint é¦–å…ˆå†…å®¹ç»˜åˆ¶ ) 

(4)å¯äº¤äº’æ—¶é—´ (Time to Interactive TTI)

(5) Networkè¯·æ±‚æ—¶é—´(jax,jsç­‰) 

3.æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä»€ä¹ˆéƒ½èƒ½çœ‹å¾—åˆ°ï¼Œå¯ä»¥è°ƒç”¨æ€§èƒ½ç›‘æµ‹API æˆ–å»ºç«‹ å‰ç«¯ç›‘æ§ç³»ç»Ÿ(æ— ç—•åŸ‹ç‚¹) 



### æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ

å‰ç«¯æ€§èƒ½ä¼˜åŒ–åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯æ–‡ä»¶åŠ è½½æ›´å¿«ï¼Œå¦ä¸€ç±»æ˜¯æ–‡ä»¶æ¸²æŸ“æ›´å¿«ã€‚ 

* åŠ è½½æ›´å¿«çš„æ–¹æ³•ï¼š 
  * è®©ä¼ è¾“çš„æ•°æ®åŒ…æ›´å°ï¼ˆå‹ç¼©æ–‡ä»¶/å›¾ç‰‡ï¼‰ï¼šå›¾ç‰‡å‹ç¼©å’Œæ–‡ä»¶å‹ç¼© 
  * å‡å°‘ç½‘ç»œè¯·æ±‚çš„æ¬¡æ•°ï¼šé›ªç¢§å›¾/ç²¾çµå›¾ã€èŠ‚æµé˜²æŠ– 
    * é›ªç¢§å›¾çš„åº”ç”¨åœºæ™¯ä¸€èˆ¬æ˜¯é¡¹ç›®ä¸­ä¸å¸¸æ›´æ¢çš„ä¸€äº›å›ºå®šå›¾æ ‡ç»„åˆåœ¨ä¸€èµ·ï¼Œæ¯”å¦‚logoã€æœç´¢å›¾æ ‡ã€åˆ‡æ¢å›¾æ ‡ç­‰
    * ç”µå•†é¡¹ç›®ä¸­æœ€å¸¸ç”¨åˆ°çš„æ‡’åŠ è½½ï¼Œä¸€èˆ¬åœ¨æŸ¥çœ‹å•†å“å±•ç¤ºçš„æ—¶å€™é€šå¸¸ä¸‹æ‹‰åŠ è½½æ›´å¤šï¼Œå› ä¸ºå•†å“æ•°æ®å¤ªå¤šï¼Œä¸€æ¬¡æ€§è¯·æ±‚è¿‡æ¥æ•°æ®å¤ªå¤§ä¸”æ¸²æŸ“çš„æ—¶é—´å¤ªé•¿ã€‚
  * å‡å°‘æ¸²æŸ“çš„æ¬¡æ•°ï¼šç¼“å­˜ï¼ˆHTTPç¼“å­˜ã€æœ¬åœ°ç¼“å­˜ã€Vueçš„keep-aliveç¼“å­˜ç­‰ï¼‰ 
* æ¸²æŸ“æ›´å¿«çš„æ–¹æ³•ï¼š 
  * æå‰æ¸²æŸ“ï¼šssræœåŠ¡å™¨ç«¯æ¸²æŸ“ 
  * é¿å…æ¸²æŸ“é˜»å¡ï¼šCSSæ”¾åœ¨HTMLçš„headä¸­ JSæ”¾åœ¨HTMLçš„bodyåº•éƒ¨ 
  * é¿å…æ— ç”¨æ¸²æŸ“ï¼šæ‡’åŠ è½½ 
  * å‡å°‘æ¸²æŸ“æ¬¡æ•°ï¼šå¯¹domæŸ¥è¯¢è¿›è¡Œç¼“å­˜ã€å°†domæ“ä½œåˆå¹¶ã€ä½¿ç”¨å‡å°‘é‡æ’çš„æ ‡ç­¾ 


### 1ç½‘é¡µä¼˜åŒ–
#### JSä¸­çš„æ€§èƒ½ä¼˜åŒ–

##### 1.ä¸è¦è¦†ç›–åŸç”Ÿæ–¹æ³•

##### 2.äº‹ä»¶å§”æ‰˜(ç®€åŒ–DOMæ“ä½œ)

##### 3.//JSåŠ¨ç”»

##### 4.èŠ‚æµä¸é˜²æŠ–



#### é¡µé¢æ¸²æŸ“ä¼˜åŒ–

##### 1.é¿å…CSS, JSå µå¡

CSS æ˜¯é˜»å¡æ¸²æŸ“çš„èµ„æºã€‚éœ€è¦å°†å®ƒå°½æ—©ã€å°½å¿«åœ°ä¸‹è½½åˆ°å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿ç¼©çŸ­é¦–æ¬¡æ¸²æŸ“çš„æ—¶é—´ã€‚**å°½æ—©ï¼ˆå°† CSS æ”¾åœ¨ head æ ‡ç­¾é‡Œï¼‰å’Œå°½å¿«ï¼ˆå¯ç”¨ CDN å®ç°é™æ€èµ„æºåŠ è½½é€Ÿåº¦çš„ä¼˜åŒ–ï¼‰**

å®é™…ä½¿ç”¨æ—¶ï¼Œå¯ä»¥éµå¾ªä¸‹é¢3ä¸ªåŸåˆ™ï¼š
- **CSS èµ„æºä¼˜äº JavaScript èµ„æºå¼•å…¥**
- **JS åº”å°½é‡å°‘å½±å“ DOM çš„æ„å»º**

æ”¹å˜JSé˜»å¡æ–¹å¼
* deferï¼ˆå»¶ç¼“ï¼‰æ¨¡å¼
`defer` æ–¹å¼åŠ è½½ script, ä¸ä¼šé˜»å¡ HTML è§£æï¼Œç­‰åˆ° DOM ç”Ÿæˆå®Œæ¯•ä¸” script åŠ è½½å®Œæ¯•å†æ‰§è¡Œ JSã€‚
* asyncï¼ˆå¼‚æ­¥ï¼‰æ¨¡å¼
`async` å±æ€§è¡¨ç¤ºå¼‚æ­¥æ‰§è¡Œå¼•å…¥çš„ JSï¼ŒåŠ è½½æ—¶ä¸ä¼šé˜»å¡ HTMLè§£æï¼Œä½†æ˜¯åŠ è½½å®Œæˆåç«‹é©¬æ‰§è¡Œï¼Œæ­¤æ—¶ä»ç„¶ä¼šé˜»å¡ load äº‹ä»¶ã€‚
ä»åº”ç”¨çš„è§’åº¦æ¥è¯´ï¼Œä¸€èˆ¬å½“æˆ‘ä»¬çš„è„šæœ¬ä¸ DOM å…ƒç´ å’Œå…¶å®ƒè„šæœ¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¸å¼ºæ—¶ï¼Œæˆ‘ä»¬ä¼šé€‰ç”¨ `async`ï¼›å½“è„šæœ¬ä¾èµ–äº DOM å…ƒç´ å’Œå…¶å®ƒè„šæœ¬çš„æ‰§è¡Œç»“æœæ—¶ï¼Œæˆ‘ä»¬ä¼šé€‰ç”¨`defer`ã€‚

##### 2.ä½¿ç”¨å­—ä½“å›¾æ ‡iconfontä»£æ›¿å›¾ç‰‡å›¾æ ‡
å­—ä½“å›¾æ ‡æ˜¯çŸ¢é‡å›¾ï¼Œä¸ä¼šå¤±çœŸã€‚è¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹æ˜¯ç”Ÿæˆçš„æ–‡ä»¶ç‰¹åˆ«å°ã€‚



##### 3.é™ä½CSSé€‰æ‹©å™¨å¤æ‚æ€§
æµè§ˆå™¨è¯»å–é€‰æ‹©å™¨ï¼Œéµå¾ªçš„åŸåˆ™æ˜¯ä»é€‰æ‹©å™¨çš„å³è¾¹åˆ°å·¦è¾¹è¯»å–

1. å‡å°‘åµŒå¥—ã€‚åä»£é€‰æ‹©å™¨çš„å¼€é”€æ˜¯æœ€é«˜çš„ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥å°½é‡å°†é€‰æ‹©å™¨çš„æ·±åº¦é™åˆ°æœ€ä½ï¼ˆæœ€é«˜ä¸è¦è¶…è¿‡ä¸‰å±‚ï¼‰ï¼Œå°½å¯èƒ½ä½¿ç”¨ç±»æ¥å…³è”æ¯ä¸€ä¸ªæ ‡ç­¾å…ƒç´ 
2. å…³æ³¨å¯ä»¥é€šè¿‡ç»§æ‰¿å®ç°çš„å±æ€§ï¼Œé¿å…é‡å¤åŒ¹é…é‡å¤å®šä¹‰
3. å°½é‡ä½¿ç”¨é«˜ä¼˜å…ˆçº§çš„é€‰æ‹©å™¨ï¼Œä¾‹å¦‚ ID å’Œç±»é€‰æ‹©å™¨ã€‚
4. é¿å…ä½¿ç”¨é€šé…ç¬¦ï¼Œåªå¯¹éœ€è¦ç”¨åˆ°çš„å…ƒç´ è¿›è¡Œé€‰æ‹©



##### 4.å‡å°‘é‡ç»˜å’Œé‡æ’(å›æµ)

**å›æµå¿…å°†å¼•èµ·é‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•èµ·å›æµï¼Œå›æµæ¯”é‡ç»˜çš„ä»£ä»·è¦æ›´é«˜ã€‚**
å¦‚ä½•é¿å…?
**CSS**
- é¿å…ä½¿ç”¨tableå¸ƒå±€ã€‚
- å°½å¯èƒ½åœ¨DOMæ ‘çš„æœ€æœ«ç«¯æ”¹å˜classã€‚
- é¿å…è®¾ç½®å¤šå±‚å†…è”æ ·å¼ã€‚
- å°†åŠ¨ç”»æ•ˆæœåº”ç”¨åˆ°positionå±æ€§ä¸ºabsoluteæˆ–fixedçš„å…ƒç´ ä¸Šã€‚
- é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ï¼šcalc()ï¼‰ã€‚

**JavaScript**
- é¿å…é¢‘ç¹æ“ä½œæ ·å¼ï¼Œæœ€å¥½ä¸€æ¬¡æ€§é‡å†™styleå±æ€§ï¼Œæˆ–è€…å°†æ ·å¼åˆ—è¡¨å®šä¹‰ä¸ºclasså¹¶ä¸€æ¬¡æ€§æ›´æ”¹classå±æ€§ã€‚
- é¿å…é¢‘ç¹æ“ä½œDOMï¼Œåˆ›å»ºä¸€ä¸ªdocumentFragmentï¼Œåœ¨å®ƒä¸Šé¢åº”ç”¨æ‰€æœ‰DOMæ“ä½œï¼Œæœ€åå†æŠŠå®ƒæ·»åŠ åˆ°æ–‡æ¡£ä¸­ã€‚
- ä¹Ÿå¯ä»¥å…ˆä¸ºå…ƒç´ è®¾ç½®display: noneï¼Œæ“ä½œç»“æŸåå†æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥ã€‚å› ä¸ºåœ¨displayå±æ€§ä¸ºnoneçš„å…ƒç´ ä¸Šè¿›è¡Œçš„DOMæ“ä½œä¸ä¼šå¼•å‘å›æµå’Œé‡ç»˜ã€‚
- é¿å…é¢‘ç¹è¯»å–ä¼šå¼•å‘å›æµ/é‡ç»˜çš„å±æ€§ï¼Œå¦‚æœç¡®å®éœ€è¦å¤šæ¬¡ä½¿ç”¨ï¼Œå°±ç”¨ä¸€ä¸ªå˜é‡ç¼“å­˜èµ·æ¥ã€‚
- å¯¹å…·æœ‰å¤æ‚åŠ¨ç”»çš„å…ƒç´ ä½¿ç”¨ç»å¯¹å®šä½ï¼Œä½¿å®ƒè„±ç¦»æ–‡æ¡£æµï¼Œå¦åˆ™ä¼šå¼•èµ·çˆ¶å…ƒç´ åŠåç»­å…ƒç´ é¢‘ç¹å›æµã€‚
 ,
##### ~~5.ä½¿ç”¨flexboxå¸ƒå±€~~

##### 6.å›¾ç‰‡èµ„æºä¼˜åŒ–

ä½¿ç”¨é›ªç¢§å›¾

é›ªç¢§å›¾çš„ä½œç”¨å°±æ˜¯å‡å°‘è¯·æ±‚æ•°ï¼Œè€Œä¸”å¤šå¼ å›¾ç‰‡åˆåœ¨ä¸€èµ·åçš„ä½“ç§¯ä¼šå°‘äºå¤šå¼ å›¾ç‰‡çš„ä½“ç§¯æ€»å’Œ

å›¾ç‰‡å‹ç¼©

å‹ç¼©æ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸€æ˜¯é€šè¿‡åœ¨çº¿ç½‘ç«™è¿›è¡Œå‹ç¼©ï¼ŒäºŒæ˜¯é€šè¿‡ webpack æ’ä»¶ image-webpack-loaderã€‚å®ƒæ˜¯åŸºäº [imagemin](https://link.segmentfault.com/?enc=OIHazSW1xgE0eJv1ufzlhg%3D%3D.50sTefI%2FunQpQnTLFGGC2iHdYBRXLANOzcn9%2BnYmSIMvSsZ2MxqDRBV%2F%2BgM8jZ3hfnNCnY2A6GBe0w8Jx7FIk7eCSR1knYAy2lBQYNu45s4%3D) è¿™ä¸ª Node åº“æ¥å®ç°å›¾ç‰‡å‹ç¼©çš„ã€‚

å›¾ç‰‡æ‹‰åŠ è½½

åœ¨é¡µé¢ä¸­ï¼Œå…ˆä¸ç»™å›¾ç‰‡è®¾ç½®è·¯å¾„ï¼Œåªæœ‰å½“å›¾ç‰‡å‡ºç°åœ¨æµè§ˆå™¨çš„å¯è§†åŒºåŸŸæ—¶ï¼Œæ‰å»åŠ è½½çœŸæ­£çš„å›¾ç‰‡ï¼Œè¿™å°±æ˜¯å»¶è¿ŸåŠ è½½ã€‚å¯¹äºå›¾ç‰‡å¾ˆå¤šçš„ç½‘ç«™æ¥è¯´ï¼Œä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨å›¾ç‰‡ï¼Œä¼šå¯¹ç”¨æˆ·ä½“éªŒé€ æˆå¾ˆå¤§çš„å½±å“ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å›¾ç‰‡å»¶è¿ŸåŠ è½½ã€‚

ä½¿ç”¨CSS3ä»£æ›¿å›¾ç‰‡


ä½¿ç”¨webpæ ¼å¼çš„å›¾ç‰‡

å°çš„å›¾ç‰‡ä½“ç§¯ï¼Œè€Œä¸”æ‹¥æœ‰è‚‰çœ¼è¯†åˆ«æ— å·®å¼‚çš„å›¾åƒè´¨é‡ï¼›åŒæ—¶å…·å¤‡äº†æ— æŸå’Œæœ‰æŸçš„å‹ç¼©æ¨¡å¼ã€Alpha é€æ˜ä»¥åŠåŠ¨ç”»çš„ç‰¹æ€§ï¼Œåœ¨ JPEG å’Œ PNG ä¸Šçš„è½¬åŒ–æ•ˆæœéƒ½ç›¸å½“ä¼˜ç§€ã€ç¨³å®šå’Œç»Ÿä¸€ã€‚



##### å¼€å¯ Gzip
- ä¸‹è½½: yarn add compression-webpack-plugin --dev
- vue.config.js

``` js
var CompressionWebpackPlugin = require('compression-webpack-plugin');
...
configureWebpack: config => {
  config.plugins.push(
      new CompressionWebpackPlugin({
          test: new RegExp('\\.(js|css)$'),
          threshold: 8192,
          minRatio: 0.8
      })
 )
```

- nginx.confä¸­
![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6749ab642da04d578181cc30d6f114e7~tplv-k3u1fbpfcp-watermark.image)

##### é™æ€èµ„æº(css/js/img)ä½¿ç”¨CDNå¼•å…¥
æµè§ˆå™¨ä»æœåŠ¡å™¨ä¸Šä¸‹è½½ CSSã€js å’Œå›¾ç‰‡ç­‰æ–‡ä»¶æ—¶éƒ½è¦å’ŒæœåŠ¡å™¨è¿æ¥ï¼Œè€Œå¤§éƒ¨åˆ†æœåŠ¡å™¨çš„å¸¦å®½æœ‰é™ï¼Œå¦‚æœè¶…è¿‡é™åˆ¶ï¼Œç½‘é¡µå°±åŠå¤©ååº”ä¸è¿‡æ¥ã€‚è€Œ CDN å¯ä»¥é€šè¿‡ä¸åŒçš„åŸŸåæ¥åŠ è½½æ–‡ä»¶ï¼Œä»è€Œä½¿ä¸‹è½½æ–‡ä»¶çš„å¹¶å‘è¿æ¥æ•°å¤§å¤§å¢åŠ ï¼Œä¸”CDN å…·æœ‰æ›´å¥½çš„å¯ç”¨æ€§ï¼Œæ›´ä½çš„ç½‘ç»œå»¶è¿Ÿå’Œä¸¢åŒ…ç‡ ã€‚
![image-20201119221157741.png](https://i.loli.net/2021/04/09/c2ZFgNI75WtVAze.png)


### 2Vueä»£ç å±‚é¢ä¼˜åŒ–

####  1) v-for éå†åˆ—è¡¨
æŒ‡å®šéä¸‹æ ‡çš„å”¯ä¸€key
ä¸åŒæ—¶ä½¿ç”¨ v-if

#### åˆç†ä½¿ç”¨watch computed
- å½“æˆ‘ä»¬éœ€è¦è¿›è¡Œæ•°å€¼è®¡ç®—ï¼Œå¹¶ä¸”ä¾èµ–äºå…¶å®ƒæ•°æ®æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ computedï¼Œå› ä¸ºå¯ä»¥åˆ©ç”¨ computed çš„ç¼“å­˜ç‰¹æ€§ï¼Œé¿å…æ¯æ¬¡è·å–å€¼æ—¶ï¼Œéƒ½è¦é‡æ–°è®¡ç®—ï¼›
- å½“æˆ‘ä»¬éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œ**å¼‚æ­¥**æˆ–**å¼€é”€è¾ƒå¤§**çš„æ“ä½œæ—¶ï¼Œåº”è¯¥ä½¿ç”¨ watchï¼Œä½¿ç”¨ watch é€‰é¡¹å…è®¸æˆ‘ä»¬æ‰§è¡Œå¼‚æ­¥æ“ä½œ ( è®¿é—®ä¸€ä¸ª API )ï¼Œé™åˆ¶æˆ‘ä»¬æ‰§è¡Œè¯¥æ“ä½œçš„é¢‘ç‡ï¼Œå¹¶åœ¨æˆ‘ä»¬å¾—åˆ°æœ€ç»ˆç»“æœå‰ï¼Œè®¾ç½®ä¸­é—´çŠ¶æ€ã€‚è¿™äº›éƒ½æ˜¯è®¡ç®—å±æ€§æ— æ³•åšåˆ°çš„ã€‚

#### é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–
Vue ä¼šé€šè¿‡ `Object.defineProperty` å¯¹æ•°æ®è¿›è¡ŒåŠ«æŒï¼Œæ¥å®ç°è§†å›¾å“åº”æ•°æ®çš„å˜åŒ–ï¼Œç„¶è€Œæœ‰äº›æ—¶å€™æˆ‘ä»¬çš„ç»„ä»¶å°±æ˜¯çº¯ç²¹çš„æ•°æ®å±•ç¤ºï¼Œä¸ä¼šæœ‰ä»»ä½•æ”¹å˜ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ Vue æ¥åŠ«æŒæˆ‘ä»¬çš„æ•°æ®ï¼Œåœ¨å¤§é‡æ•°æ®å±•ç¤ºçš„æƒ…å†µä¸‹ï¼Œè¿™èƒ½å¤Ÿå¾ˆæ˜æ˜¾çš„å‡å°‘ç»„ä»¶åˆå§‹åŒ–çš„æ—¶é—´ï¼Œé‚£å¦‚ä½•ç¦æ­¢ Vue åŠ«æŒæˆ‘ä»¬çš„æ•°æ®å‘¢ï¼Ÿå¯ä»¥é€šè¿‡ `Object.freeze` æ–¹æ³•æ¥å†»ç»“ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€æ—¦è¢«å†»ç»“çš„å¯¹è±¡å°±å†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹äº†ã€‚

```javascript
export default {
  data: () => ({
    users: {}
  }),
  async created() {
    const users = await axios.get("/api/users");
    this.users = Object.freeze(users);
  }
};
```



#### ä¼˜åŒ–æ— çº¿åˆ—è¡¨æ€§èƒ½: è™šæ‹Ÿåˆ—è¡¨
å¦‚æœä½ çš„åº”ç”¨å­˜åœ¨éå¸¸é•¿æˆ–è€…æ— é™æ»šåŠ¨çš„åˆ—è¡¨ï¼Œé‚£ä¹ˆéœ€è¦é‡‡ç”¨ çª—å£åŒ– çš„æŠ€æœ¯æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œåªéœ€è¦æ¸²æŸ“å°‘éƒ¨åˆ†åŒºåŸŸçš„å†…å®¹ï¼Œå‡å°‘é‡æ–°æ¸²æŸ“ç»„ä»¶å’Œåˆ›å»º dom èŠ‚ç‚¹çš„æ—¶é—´ã€‚ ä½ å¯ä»¥å‚è€ƒä»¥ä¸‹å¼€æºé¡¹ç›® [vue-virtual-scroll-list](https://link.segmentfault.com/?enc=RwGR6yk1CBddLI%2Bu8vtszQ%3D%3D.dlCkBYR4PA%2B55K3tT%2FQw8n0NYgopqNuyAiHiOl%2BmqkEbvSEXfwJzLmiOlCKtzroQt8eQCA8Nhva3W4K0YZ%2B%2FqtpzzMo6urAt17%2F52bgtgue87rsur8bCDAKfgfIWQNni) å’Œ [vue-virtual-scroller](https://link.segmentfault.com/?enc=VUESvmfK3cEynJ2TsRaDtw%3D%3D.BJ5wA7H4OmMcXokRRU59qGLNEEnNcyBtrSbVUK4mD9Dx8n1PY3Ug0ZqP05IZgBQjewtZNwuUGdg0J9VPr%2FVEGmAMU0cO94XO2a%2FeHYKtnDDlsvX9R2pFCY2p2kTTalwi) æ¥ä¼˜åŒ–è¿™ç§æ— é™åˆ—è¡¨çš„åœºæ™¯çš„ã€‚



#### äº‹ä»¶çš„é”€æ¯
Vue ç»„ä»¶é”€æ¯æ—¶ï¼Œä¼šè‡ªåŠ¨æ¸…ç†å®ƒä¸å…¶å®ƒå®ä¾‹çš„è¿æ¥ï¼Œè§£ç»‘å®ƒçš„å…¨éƒ¨æŒ‡ä»¤åŠäº‹ä»¶ç›‘å¬å™¨ï¼Œä½†æ˜¯ä»…é™äºç»„ä»¶æœ¬èº«çš„äº‹ä»¶ã€‚ å¦‚æœåœ¨ JS å†…ä½¿ç”¨ `addEventListener` ç­‰æ–¹å¼æ˜¯ä¸ä¼šè‡ªåŠ¨é”€æ¯çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»„ä»¶é”€æ¯æ—¶æ‰‹åŠ¨ç§»é™¤è¿™äº›äº‹ä»¶çš„ç›‘å¬ï¼Œä»¥å…é€ æˆå†…å­˜æ³„éœ²ï¼Œå¦‚ï¼š

```javascript
created() {
  addEventListener('click', this.click, false)
},
beforeDestroy() {
  removeEventListener('click', this.click, false)
}
```


#### å›¾ç‰‡èµ„æºæ‡’åŠ è½½
å¦‚ä½¿ç”¨v-lazyload

##### é¡µé¢å¤§é‡å›¾ç‰‡ï¼Œå¦‚ä½•ä¼˜åŒ–åŠ è½½ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
1. å›¾ç‰‡æ‡’åŠ è½½ã€‚åœ¨é¡µé¢çš„æœªå¯è§†åŒºåŸŸæ·»åŠ ä¸€ä¸ªæ»šåŠ¨äº‹ä»¶ï¼Œåˆ¤æ–­å›¾ç‰‡ä½ç½®ä¸æµè§ˆå™¨é¡¶ç«¯çš„è·ç¦»ä¸é¡µé¢çš„è·ç¦»ï¼Œå¦‚æœå‰è€…å°äºåè€…ï¼Œä¼˜å…ˆåŠ è½½ã€‚
2. å¦‚æœä¸ºå¹»ç¯ç‰‡ã€ç›¸å†Œç­‰ï¼Œå¯ä»¥ä½¿ç”¨å›¾ç‰‡é¢„åŠ è½½æŠ€æœ¯ï¼Œå°†å½“å‰å±•ç¤ºå›¾ç‰‡çš„å‰ä¸€å¼ å’Œåä¸€å¼ ä¼˜å…ˆä¸‹è½½ã€‚
3. å¦‚æœå›¾ç‰‡ä¸ºcsså›¾ç‰‡ï¼Œå¯ä»¥ä½¿ç”¨CSSspriteï¼ŒSVGspriteç­‰æŠ€æœ¯ã€‚
4. å¦‚æœå›¾ç‰‡è¿‡å¤§ï¼Œå¯ä»¥ä½¿ç”¨ç‰¹æ®Šç¼–ç çš„å›¾ç‰‡ï¼ŒåŠ è½½æ—¶ä¼šå…ˆåŠ è½½ä¸€å¼ å‹ç¼©çš„ç‰¹åˆ«å‰å®³çš„ç¼©ç•¥å›¾ï¼Œä»¥æé«˜ç”¨æˆ·ä½“éªŒã€‚
5. å¦‚æœå›¾ç‰‡å±•ç¤ºåŒºåŸŸå°äºå›¾ç‰‡çš„çœŸå®å¤§å°ï¼Œåº”åœ¨æœåŠ¡å™¨ç«¯æ ¹æ®ä¸šåŠ¡éœ€è¦å…ˆè¿›è¡Œå›¾ç‰‡å‹ç¼©ï¼Œå›¾ç‰‡å‹ç¼©åå¤§å°ä¸å±•ç¤ºä¸€è‡´ã€‚



#### è·¯ç”±ç»„ä»¶æ‡’åŠ è½½
```js
https://blog.csdn.net/fanjianglin/article/details/113430620
```

>  **VueåŠ¨æ€åŠ è½½ç»„ä»¶ä¸»è¦æœ‰ä¸¤ç±»æ–¹å¼ï¼Œå³importæ–¹å¼å’Œrequireæ–¹å¼**, 

const Home = () => import('./pages/Home')

#### ç¬¬ä¸‰æ–¹æ’ä»¶çš„æŒ‰éœ€å¼•å…¥
å¦‚: element-ui / vant 


#### æœåŠ¡ç«¯æ¸²æŸ“SSR / é¢„æ¸²æŸ“

å…·ä½“çš„ Vue SSR å¦‚ä½•å®ç°ï¼Œå¯ä»¥å‚è€ƒä½œè€…çš„å¦ä¸€ç¯‡æ–‡ç« ã€Š [Vue SSR è¸©å‘ä¹‹æ—…](https://link.segmentfault.com/?enc=Hf%2BIPuMRv2K%2BeUWhiiDh1w%3D%3D.3jDS1JNzAA3uTddj1k%2FbKUkxDfmUV66bvM0o0VlBp7p4tnJIH%2F%2FCoaWInurEjB3S) ã€‹ã€‚å¦‚æœä½ çš„ Vue é¡¹ç›®åªéœ€æ”¹å–„å°‘æ•°è¥é”€é¡µé¢ï¼ˆä¾‹å¦‚ /ï¼Œ /aboutï¼Œ /contact ç­‰ï¼‰çš„ SEOï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦**é¢„æ¸²æŸ“**ï¼Œåœ¨æ„å»ºæ—¶ (build time) ç®€å•åœ°ç”Ÿæˆé’ˆå¯¹ç‰¹å®šè·¯ç”±çš„é™æ€ HTML æ–‡ä»¶ã€‚ä¼˜ç‚¹æ˜¯è®¾ç½®é¢„æ¸²æŸ“æ›´ç®€å•ï¼Œå¹¶å¯ä»¥å°†ä½ çš„å‰ç«¯ä½œä¸ºä¸€ä¸ªå®Œå…¨é™æ€çš„ç«™ç‚¹ï¼Œå…·ä½“ä½ å¯ä»¥ä½¿ç”¨ [prerender-spa-plugin](https://link.segmentfault.com/?enc=0VzVqkIFywisus2tXadNQA%3D%3D.idXZ937QutVTXXQ7wd01EK5OzIiISu2XSekHrv7pF9FQiDAmnD%2BWfxWCnx3amR%2FY1GwMIYYXtSDhO1lW0mWFyN7OTrA%2BbYHHgPsQzzqGblwB1SWoyI0BnBBKo7se13rh) å°±å¯ä»¥è½»æ¾åœ°æ·»åŠ é¢„æ¸²æŸ“ ã€‚


 ### è„šæ‰‹æ¶vue-cli5æ€§èƒ½ä¼˜åŒ–
> [å¦‚ä½•ä¼˜åŒ–ä½ çš„ vue-cli é¡¹ç›®ï¼Ÿå‰è¨€ åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæœ€å®¹æ˜“è®©äººæ³¨æ„çš„å°±æ˜¯é¡¹ç›®ç¼–è¯‘æ‰“åŒ…çš„æ—¶é—´ï¼Œç‰¹åˆ«æ˜¯åœ¨è¾ƒé¢‘ç¹æ‰“åŒ…éƒ¨ç½²æ—¶ - æ˜é‡‘](https://juejin.cn/post/7078491632605069348)

vue-clié»˜è®¤é…ç½®å·²ç»æ·»åŠ äº†å¾ˆå¤šå¸¸ç”¨çš„ä¼˜åŒ–ï¼ŒåŒ…æ‹¬ï¼š

- `cache-loader` ä¼šé»˜è®¤ä¸º Vue/Babel/TypeScript ç¼–è¯‘å¼€å¯ã€‚æ–‡ä»¶ä¼šç¼“å­˜åœ¨ `node_modules/.cache` ä¸­
- å›¾ç‰‡ç­‰å¤šåª’ä½“æ–‡ä»¶ä½¿ç”¨`url-loader`ï¼Œå°äº4Kçš„å›¾ç‰‡ä¼šè½¬base64ç¼–ç å†…è”åœ¨jsæ–‡ä»¶ä¸­
- ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨`mini-css-extract-plugin`ï¼Œå°†cssæå–æˆå•ç‹¬çš„æ–‡ä»¶
- `thread-loader` ä¼šåœ¨å¤šæ ¸ CPU çš„æœºå™¨ä¸Šä¸º Babel/TypeScript è½¬è¯‘å¼€å¯å¹¶è¡Œå¤„ç†ã€‚
- æå–å…¬å…±ä»£ç ï¼šä¸¤ä¸ªç¼“å­˜ç»„`chunk-vendors`å’Œ`chunk-common`
- ä»£ç å‹ç¼©(`terser-webpack-plugin`)
- `preload-webpack-plugin`ï¼šæ‰€æœ‰å…¥å£jsã€cssæ–‡ä»¶åŠ ä¸Š`preload`ï¼ŒæŒ‰éœ€åŠ è½½æ–‡ä»¶åŠ ä¸Š`prefetch`


#### 1.å‡å°‘æ‰“åŒ…ä½“ç§¯

##### 1.productionSourceMapè®¾ç½®ä¸ºfalse
> å»é™¤æ‰“åŒ…åç”Ÿæˆçš„ map æ–‡ä»¶ï¼Œå‡å°‘ä»£ç ä½“ç§¯
```js
module.exports = defineConfig({
  productionSourceMap: false,
})

```


##### 2.å¯ç”¨gzipå‹ç¼©
1.å®‰è£…ä¾èµ–
```bash
npm i compression-webpack-plugin -D
```

2.`vue.config.js`é…ç½®
```js
// åœ¨`vue.config.js`ä¸­é…ç½®
const CompressionPlugin = require('compression-webpack-plugin')

module.exports = {
    plugins: [ new CompressionPlugin() ],
    chainWebpack: (config) => {
        // ç”Ÿäº§ç¯å¢ƒï¼Œå¼€å¯js\csså‹ç¼©
        if (process.env.NODE_ENV === 'production') {
            config.plugin('CompressionPlugin').use(new CompressionPlugin({
                algorithm: 'gzip',
                test: /\.(js|css|json|txt|html|ico|svg)(\?.*)?$/i, // åŒ¹é…æ–‡ä»¶å
                threshold: 10240, // å¯¹è¶…è¿‡5kçš„æ•°æ®å‹ç¼©(é»˜è®¤10k)
                minRatio: 0.8,
                deleteOriginalAssets: false // åˆ é™¤æºæ–‡ä»¶(é»˜è®¤false)
            }))
        }
    }
}
```


##### 3.å›¾ç‰‡å‹ç¼©
> é…ç½® image-webpack-loader å›¾ç‰‡å‹ç¼©

```js
module.exports = defineConfig({
  chainWebpack: (config) => {
    config.module
      .rule('min-image')
      .test(/.(png|jpe?g|gif|svg)(?.*)?$/)
      .use('image-webpack-loader')
      .loader('image-webpack-loader')
      .options({ disable: process.env.NODE_ENV == 'development' ? true : false })//æ­¤å¤„ä¸ºtureçš„æ—¶å€™ä¸ä¼šå¯ç”¨å‹ç¼©å¤„ç†,ç›®çš„æ˜¯ä¸ºäº†å¼€å‘æ¨¡å¼ä¸‹è°ƒè¯•é€Ÿåº¦æ›´å¿«,ç½‘ä¸Šé”™è¯¯ç¤ºä¾‹ç›´æ¥å†™ä¸ºdisable:true,å¦‚æœä¸å»æŸ¥çœ‹æ–‡æ¡£è‚¯å®šæ˜¯è¦è¢«å‘çš„
      .end()
    config.plugins.delete("prefetch")  //åˆ é™¤é¢„åŠ è½½ æå‡é¦–æ¬¡åŠ è½½é€Ÿåº¦
  },
});

```



##### 5.å›¾ç‰‡å’Œå­—ä½“è½¬base64,æ–‡ä»¶
> ä½¿ç”¨url-loaderæˆ–file-loaderã€‚å¯¹äºå°å›¾ç‰‡å’Œå­—ä½“æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨url-loaderå°†å®ƒä»¬è½¬æ¢ä¸ºBase64ç¼–ç ï¼Œå¹¶ç›´æ¥åµŒå…¥åˆ°ç”Ÿæˆçš„JSæˆ–CSSæ–‡ä»¶ä¸­ï¼Œé¿å…é¢å¤–çš„HTTPè¯·æ±‚ã€‚å¯¹äºå¤§æ–‡ä»¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨file-loaderå°†å®ƒä»¬å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ä¸­ï¼Œå¹¶è¿”å›ç›¸å¯¹URLã€‚

```js
module.exports = {  
  chainWebpack: config => {  
    config.module  
      .rule('images')  
      .test(/\.(png|jpe?g|gif|webp)(\?.*)?$/)  
      .use('url-loader')  
      .loader('url-loader')  
      .options({  
        limit: 8192, // å°äº8kbçš„å›¾ç‰‡è½¬æ¢ä¸ºBase64ç¼–ç   
        name: 'img/[name].[hash:7].[ext]' // è¾“å‡ºåˆ°imgç›®å½•ï¼Œæ–‡ä»¶ååŒ…å«hashå€¼  
      });  
  
    config.module  
      .rule('fonts')  
      .test(/\.(woff2?|eot|ttf|otf)(\?.*)?$/)  
      .use('url-loader')  
      .loader('url-loader')  
      .options({  
        limit: 10000, // å°äº10kbçš„å­—ä½“æ–‡ä»¶è½¬æ¢ä¸ºBase64ç¼–ç   
        name: 'fonts/[name].[hash:7].[ext]' // è¾“å‡ºåˆ°fontsç›®å½•ï¼Œæ–‡ä»¶ååŒ…å«hashå€¼  
      });  
  }  
};
```




##### 3.åˆ é™¤æ— ç”¨æ–‡ä»¶
> å®‰è£…useless-files-w5-webpack-plugin

```js
module.exports = defineConfig({ 
 configureWebpack:{
    plugins: [
      new UnusedFilesW5WebpackPlugin({
        root: ['./src'], // é¡¹ç›®ç›®å½•
        output: './fileList.json', // è¾“å‡ºæ–‡ä»¶åˆ—è¡¨
        clean: false, // æ˜¯å¦åˆ é™¤æ–‡ä»¶, ä¸å»ºè®®å¼€å¯ï¼Œæ‰‹åŠ¨åˆ é™¤æ¯”è¾ƒå¥½ï¼Œé˜²æ­¢è¯¯åˆ 
        exclude: ['node_modules']  // æ’é™¤æ–‡ä»¶åˆ—è¡¨
      })
    ]
  }
})

```


##### 4.é…ç½®CDN,å‡å°‘æ‰“åŒ…æäº¤
> éœ€è¦å†htmlå’Œvue.config.jsä¸­éƒ½é…ç½®

```html
  <body>
    <noscript>
      <strong
        >We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work
        properly without JavaScript enabled. Please enable it to
        continue.</strong
      >
    </noscript>
    <div id="app"></div>
    //å¼•å…¥echarts
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.1/echarts.min.js"></script>
  </body>

```

```js
module.exports = defineConfig({
  configureWebpack: {
    externals: {
      "./cptable": "var cptable",
      'echarts': 'echarts'
    },
  },
});

```



#### 2.æé«˜æ‰“åŒ…é€Ÿåº¦
##### 1.é…ç½®ç¼“å­˜æé«˜æ„å»ºé€Ÿåº¦
```js
module.exports = defineConfig({ 
 configureWebpack: {
    cache: {
      type: 'filesystem',
      allowCollectingMemory: true
    },
  }
})

```



#### 3.åˆ†æå·¥å…·
> ä½¿ç”¨`speed-measure-webpack-plugin`, `webpack-bundle-analyzer`åˆ†æå·¥å…·,ä½¿ç”¨`thread-loader`å¼€å¯å¤šçº¿ç¨‹ä¼˜åŒ–
> 
> `speed-measure-webpack-plugin`æ¥æµ‹é‡ç½‘é¡µåŒ…æ„å»ºé€Ÿåº¦,è¾“å‡ºå„ä¸ªæ¨¡å—ç¼–è¯‘æ—¶é•¿,æ‰¾åˆ°æ›´è€—æ—¶çš„æ¨¡å¼
> `webpack-bundle-analyzer`å¯è§†åŒ–ç‹çˆ·åŒ…è¾“å‡ºæ–‡ä»¶å¤§å°,æä¾›äº¤äº’æ ‘å½¢å›¾.
> ä½¿ç”¨`thread-loader`å¼€å¯å¤šçº¿ç¨‹ä¼˜åŒ–, ä½¿ç”¨`hard-source-webpack-plugin`å®ç°ç¼“å­˜ä¼˜åŒ–

```js
const SpeedMeasurePlugin = require('speed-measure-webpack-plugin');
module.exports = {
  ...,
  configureWebpack: (config) => {
      ...
      config.plugins.push(
        new SpeedMeasurePlugin(),
      );
    },
};


```

```js

const SpeedMeasurePlugin = require('speed-measure-webpack-plugin');
const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;
module.exports = {
  ...,
  configureWebpack: (config) => {
      ...
      config.plugins.push(
        new SpeedMeasurePlugin(),
      + new BundleAnalyzerPlugin()
      );
    },
};

```







#### å…¶å®ƒä¼˜åŒ–
1.aliasåˆ«åé…ç½®
> [**resolve.alias**](https://link.juejin.cn/?target=https%3A%2F%2Fwebpack.docschina.org%2Fconfiguration%2Fresolve%23resolvealias "https://webpack.docschina.org/configuration/resolve#resolvealias")Â æ˜¯ç”¨äºåˆ›å»ºÂ `import`Â æˆ–Â `require`Â çš„åˆ«åï¼Œæ¥ç¡®ä¿æ¨¡å—å¼•å…¥å˜å¾—æ›´ç®€å•

```js
   chainWebpack: (config) => {
      // é…ç½®åˆ«å
      config.resolve.alias
        .set('@build', pathResolve('../build')) // æ„å»ºç›®å½•
        .set('@', pathResolve('../src'))
        .set('@api', pathResolve('../src/api'))
        .set('@utils', pathResolve('../src/utils'))
        .set('@views', pathResolve('../src/views'));
  }

```







# Webé¡µé¢å…¨é“¾è·¯æ€§èƒ½ä¼˜åŒ–æŒ‡å—

### æ¥æº
> [Webé¡µé¢å…¨é“¾è·¯æ€§èƒ½ä¼˜åŒ–æŒ‡å— | å”å¿—è¿œ](https://fe32.top/articles/we0522bs/)
> [åŸºäºè‡ªå»º VTree çš„å…¨é“¾è·¯åŸ‹ç‚¹æ–¹æ¡ˆ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/564189923)
> [å‰ç«¯å…¨é“¾è·¯ä¼˜åŒ–å®æˆ˜è¯¾](https://time.geekbang.org/column/intro/100759401)
> 



